<!DOCTYPE HTML>

<html>
<head>
<style>
/* Set the size of the div element that contains the map */
#map {
width: 25%;  /* The width is the width of the web page */
height: 25%;
position: absolute;
bottom:0;
right: 0;
z-index: 2;
}

#video-feed {
position: absolute;
height: 100%;
width: 100%;
z-index: 1;
top:0;
left:0;
}

</style>

</head>

<body>

<image id="video-feed">Video Feed Unavailable</image>

<script type = "text/javascript">

var feed = document.getElementById("video-feed");

if ("WebSocket" in window) {
var ws = new WebSocket("ws://"+window.location.hostname+":9001");
ws.binaryType = "arraybuffer";
ws.onopen = function() {
ws.send(JSON.stringify({role:"viewer"}));
feed.addEventListener('click', function (event) {
if (document.fullscreenElement) {
document.exitFullscreen();
} else {
document.documentElement.requestFullscreen();
}

}, false);

};

ws.onmessage = function (evt) {
window.URL.revokeObjectURL(feed.src);
var arrayBuffer = evt.data;
var blob  = new Blob([new Uint8Array(arrayBuffer)], {type: "image/jpeg"});
feed.src = window.URL.createObjectURL(blob);
};

ws.onclose = function() {};
} else {

// The browser doesn't support WebSocket
alert("WebSocket NOT supported by your Browser!");
}
</script>
</body>
</html>
